API Reference
This is the long list of functions you can use. Remember that you don't need to remember all of those and that you can already make music with a small set of functions!


decay
Synonyms: dec

Amplitude envelope decay time: the time it takes after the attack time to reach the sustain level. Note that the decay is only audible if the sustain value is lower than 1.


time : number | Pattern - decay time in seconds
note("c3 e3 f3 g3").decay("<.1 .2 .3 .4>").sustain(0)
defaultmidimap
configures the default midimap, which is used when no "midimap" port is set


defaultmidimap({ lpf: 74 })
$: note("c a f e").midi();
$: lpf(sine.slow(4).segment(16)).midi();
defragmentHaps
Combines adjacent haps with the same value and whole. Only intended for use in tests.


degrade
Randomly removes 50% of events from the pattern. Shorthand for .degradeBy(0.5)


s("hh*8").degrade()
s("[hh?]*8")
degradeBy
Randomly removes events from the pattern by a given amount. 0 = 0% chance of removal 1 = 100% chance of removal


amount : number - a number between 0 and 1
s("hh*8").degradeBy(0.2)
s("[hh?0.2]*8")
//beat generator
s("bd").segment(16).degradeBy(.5).ribbon(16,1)
delay
Sets the level of the delay signal.

When using mininotation, you can also optionally add the 'delaytime' and 'delayfeedback' parameter, separated by ':'.


level : number | Pattern - between 0 and 1
s("bd bd").delay("<0 .25 .5 1>")
s("bd bd").delay("0.65:0.25:0.9 0.65:0.125:0.7")
delayfeedback
Synonyms: delayfb, dfb

Sets the level of the signal that is fed back into the delay. Caution: Values >= 1 will result in a signal that gets louder and louder! Don't do it


feedback : number | Pattern - between 0 and 1
s("bd").delay(.25).delayfeedback("<.25 .5 .75 1>")
delayspeed
Synonyms: delayt, dt

Sets the time of the delay effect.


delayspeed : number | Pattern - controls the pitch of the delay feedback
note("d d a# a".fast(2)).s("sawtooth").delay(.8).delaytime(1/2).delayspeed("<2 .5 -1 -2>")
delaysync
Synonyms: delayt, dt

Sets the time of the delay effect in cycles.


cycles : number | Pattern - delay length in cycles
s("bd bd").delay(.25).delaysync("<1 2 3 5>".div(8))
density
Noise crackle density


density : number | Pattern - between 0 and x
s("crackle*4").density("<0.01 0.04 0.2 0.5>".slow(4))
detune
Synonyms: det

Set detune for stacked voices of supported oscillators


amount : number | Pattern
note("d f a a# a d3").fast(2).s("supersaw").detune("<.1 .2 .5 24.1>")
discreteOnly
Returns a new pattern, with 'continuous' haps (those without 'whole' timespans) removed from query results.


distort
Synonyms: dist

Wave shaping distortion. CAUTION: it can get loud. Second option in optional array syntax (ex: ".9:.5") applies a postgain to the output. Most useful values are usually between 0 and 10 (depending on source gain). If you are feeling adventurous, you can turn it up to 11 and beyond ;)


distortion : number | Pattern
s("bd sd [~ bd] sd,hh*8").distort("<0 2 3 10:.5>")
note("d1!8").s("sine").penv(36).pdecay(.12).decay(.23).distort("8:.4")
div
Divides each number by the given factor.


djf
DJ filter, below 0.5 is low pass filter, above is high pass filter.


cutoff : number | Pattern - below 0.5 is low pass filter, above is high pass filter
n("0 3 7 [10,24]").s('superzow').octave(3).djf("<.5 .25 .5 .75>").osc()
drawLine
Intended for a debugging, drawLine renders the pattern as a string, where each character represents the same time span. Should only be used with single characters as values, otherwise the character slots will be messed up. Character legend:

"|" cycle separator
"-" hold previous value
"." silence

pattern : Pattern - the pattern to use
chars : number - max number of characters (approximately)
const line = drawLine("0 [1 2 3]", 10); // |0--123|0--123
console.log(line);
silence;
drive
filter overdrive for supported filter types


amount : number | Pattern
note("{f g g c d a a#}%16".sub(17)).s("supersaw").lpenv(8).lpf(150).lpq(.8).ftype('ladder').drive("<.5 4>")
drop
Experimental

Drops the given number of steps from a pattern. A positive number will drop steps from the start of a pattern, and a negative number from the end.


"tha dhi thom nam".drop("1").sound().bank("mridangam")
"tha dhi thom nam".drop("-1").sound().bank("mridangam")
"tha dhi thom nam".drop("0 1 2 3").sound().bank("mridangam")
"tha dhi thom nam".drop("0 -1 -2 -3").sound().bank("mridangam")
dry
Set dryness of reverb. See room and size for more information about reverb.


dry : number | Pattern - 0 = wet, 1 = dry
n("[0,3,7](3,8)").s("superpiano").room(.7).dry("<0 .5 .75 1>").osc()
duckattack
the attack time of the duck effect


time : number | Pattern
stack( n(run(8)).scale("c:minor").s("sawtooth").delay(.7).orbit(2), s("bd:4!4").beat("0,4,8,11,14",16).duckorbit(2).duckattack("<0.2 0 0.4>").duckdepth(1))
duckdepth
the amount of ducking applied to target orbit


depth : number | Pattern - depth of modulation from 0 to 1
stack( n(run(8)).scale("c:minor").s("sawtooth").delay(.7).orbit(2), s("bd:4!4").beat("0,4,8,11,14",16).duckorbit(2).duckattack(0.2).duckdepth("<1 .9 .6 0>"))
duckorbit
modulate the amplitude of an orbit to create a "sidechain" like effect


orbit : number | Pattern - target orbit
$: n(run(16)).scale("c:minor:pentatonic").s("sawtooth").delay(.7).orbit(2)
$: s("bd:4!4").beat("0,4,8,11,14",16).duckorbit(2).duckattack(0.2).duckdepth(1)
duration
Synonyms: dur

Sets the duration of the event in cycles. Similar to clip / legato, it also cuts samples off at the end if they exceed the duration.


seconds : number | Pattern - = 0
note("c a f e").s("piano").dur("<.5 1 2>")
each
Applies a function to each of the running patterns separately. This is intended for future use with upcoming 'stepwise' features. See all for a version that applies the function to all the patterns stacked together into a single pattern.

$: sound("bd - cp sd")
$: sound("hh*8")
each(fast("<2 3>"))

early
Nudge a pattern to start earlier in time. Equivalent of Tidal's <~ operator


cycles : number | Pattern - number of cycles to nudge left
"bd ~".stack("hh ~".early(.1)).s()
echo
Superimpose and offset multiple times, gradually decreasing the velocity


times : number - how many times to repeat
time : number - cycle offset between iterations
feedback : number - velocity multiplicator for each iteration
s("bd sd").echo(3, 1/6, .8)
echoWith
Synonyms: echowith, stutWith, stutwith

Superimpose and offset multiple times, applying the given function each time.


times : number - how many times to repeat
time : number - cycle offset between iterations
func : function - function to apply, given the pattern and the iteration index
"<0 [2 4]>"
.echoWith(4, 1/8, (p,n) => p.add(n*2))
.scale("C:minor").note()
end
The same as .begin, but cuts off the end off each sample.


length : number | Pattern - 1 = whole sample, .5 = half sample, .25 = quarter sample etc..
s("bd*2,oh*4").end("<.1 .2 .5 1>").fast(2)
euclid
Changes the structure of the pattern to form an Euclidean rhythm. Euclidean rhythms are rhythms obtained using the greatest common divisor of two numbers. They were described in 2004 by Godfried Toussaint, a Canadian computer scientist. Euclidean rhythms are really useful for computer/algorithmic music because they can describe a large number of rhythms with a couple of numbers.


pulses : number - the number of onsets/beats
steps : number - the number of steps to fill
// The Cuban tresillo pattern.
note("c3").euclid(3,8)
euclidLegato
Similar to euclid, but each pulse is held until the next pulse, so there will be no gaps.


pulses : number - the number of onsets/beats
steps : number - the number of steps to fill
rotation : - offset in steps
pat :
note("c3").euclidLegato(3,8)
euclidLegatoRot
Similar to euclid, but each pulse is held until the next pulse, so there will be no gaps, and has an additional parameter for 'rotating' the resulting sequence


pulses : number - the number of onsets/beats
steps : number - the number of steps to fill
rotation : number - offset in steps
note("c3").euclidLegatoRot(3,5,2)
euclidRot
Like euclid, but has an additional parameter for 'rotating' the resulting sequence.


pulses : number - the number of onsets/beats
steps : number - the number of steps to fill
rotation : number - offset in steps
// A Samba rhythm necklace from Brazil
note("c3").euclidRot(3,16,14)
euclidish
Synonyms: eish

A 'euclid' variant with an additional parameter that morphs the resulting rhythm from 0 (no morphing) to 1 (completely 'even'). For example sound("bd").euclidish(3,8,0) would be the same as sound("bd").euclid(3,8), and sound("bd").euclidish(3,8,1) would be the same as sound("bd bd bd"). sound("bd").euclidish(3,8,0.5) would have a groove somewhere between. Inspired by the work of Malcom Braff.


pulses : number - the number of onsets
steps : number - the number of steps to fill
groove : number - exists between the extremes of 0 (straight euclidian) and 1 (straight pulse)
sound("hh").euclidish(7,12,sine.slow(8))
.pan(sine.slow(8))
every
An alias for firstOf


n : number - how many cycles
func : function - function to apply
note("c3 d3 e3 g3").every(4, x=>x.rev())
expand
Experimental

Expands the step size of the pattern by the given factor.


sound("tha dhi thom nam").bank("mridangam").expand("3 2 1 1 2 3").pace(8)
extend
Experimental

extend is similar to fast in that it increases its density, but it also increases the step count accordingly. So stepcat("a b".extend(2), "c d") would be the same as "a b a b c d", whereas stepcat("a b".fast(2), "c d") would be the same as "[a b] [a b] c d".


stepcat(
  sound("bd bd - cp").extend(2),
  sound("bd - sd -")
).pace(8)
fanchor
controls the center of the filter envelope. 0 is unipolar positive, .5 is bipolar, 1 is unipolar negative


center : number | Pattern - 0 to 1
note("{f g g c d a a#}%8").s("sawtooth").lpf("{1000}%2")
.lpenv(8).fanchor("<0 .5 1>")
fast
Synonyms: density

Speed up a pattern by the given factor. Used by "*" in mini notation.


factor : number | Pattern - speed up factor
s("bd hh sd hh").fast(2) // s("[bd hh sd hh]*2")
fastChunk
Synonyms: fastchunk

Like chunk, but the cycles of the source pattern aren't repeated for each set of chunks.


"<0 8> 1 2 3 4 5 6 7"
.fastChunk(4, x => x.color('red')).slow(2)
.scale("C2:major").note()
fastGap
Synonyms: fastgap

speeds up a pattern like fast, but rather than it playing multiple times as fast would it instead leaves a gap in the remaining space of the cycle. For example, the following will play the sound pattern "bd sn" only once but compressed into the first half of the cycle, i.e. twice as fast.


s("bd sd").fastGap(2)
filter
Filters haps using the given function


test : function - function to test Hap
s("hh!7 oh").filter(hap => hap.value.s==='hh')
filterHaps
Returns a new Pattern, which only returns haps that meet the given test.


hap_test : function - a function which returns false for haps to be removed from the pattern
filterValues
As with filterHaps, but the function is applied to values inside haps.


value_test : function
filterWhen
Filters haps by their begin time


test : function - function to test Hap.whole.begin
findPeaks
Find peaks in spectrum magnitudes


firstCycle
Queries the pattern for the first cycle, returning Haps. Mainly of use when debugging a pattern.


with_context : Boolean - set to true, otherwise the context field will be stripped from the resulting haps.
firstCycleValues
Accessor for a list of values returned by querying the first cycle.


firstOf
Applies the given function every n cycles, starting from the first cycle.


n : number - how many cycles
func : function - function to apply
note("c3 d3 e3 g3").firstOf(4, x=>x.rev())
fit
Makes the sample fit its event duration. Good for rhythmical loops like drum breaks. Similar to loopAt.


samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })
s("rhodes/2").fit()
floor
Assumes a numerical pattern. Returns a new pattern with all values set to their mathematical floor. E.g. 3.7 replaced with to 3, and -4.2 replaced with -5.


note("42 42.1 42.5 43".floor())
fm
Synonyms: fmi

Sets the Frequency Modulation of the synth. Controls the modulation index, which defines the brightness of the sound.


brightness : number | Pattern - modulation index
note("c e g b g e")
.fm("<0 1 2 8 32>")
._scope()
fmap
see withValue


fmattack
Attack time for the FM envelope: time it takes to reach maximum modulation


time : number | Pattern - attack time
note("c e g b g e")
.fm(4)
.fmattack("<0 .05 .1 .2>")
._scope()
fmdecay
Decay time for the FM envelope: seconds until the sustain level is reached after the attack phase.


time : number | Pattern - decay time
note("c e g b g e")
.fm(4)
.fmdecay("<.01 .05 .1 .2>")
.fmsustain(.4)
._scope()
fmenv
Ramp type of fm envelope. Exp might be a bit broken..


type : number | Pattern - lin | exp
note("c e g b g e")
.fm(4)
.fmdecay(.2)
.fmsustain(0)
.fmenv("<exp lin>")
._scope()
fmh
Sets the Frequency Modulation Harmonicity Ratio. Controls the timbre of the sound. Whole numbers and simple ratios sound more natural, while decimal numbers and complex ratios sound metallic.


harmonicity : number | Pattern
note("c e g b g e")
.fm(4)
.fmh("<1 2 1.5 1.61>")
._scope()
fmsustain
Sustain level for the FM envelope: how much modulation is applied after the decay phase


level : number | Pattern - sustain level
note("c e g b g e")
.fm(4)
.fmdecay(.1)
.fmsustain("<1 .75 .5 0>")
._scope()
fmwave
waveform of the fm modulator


wave : number | Pattern - waveform
n("0 1 2 3".fast(4)).scale("d:minor").s("sine").fmwave("<sine square sawtooth crackle>").fm(4).fmh(2.01)
n("0 1 2 3".fast(4)).chord("<Dm Am F G>").voicing().s("sawtooth").fmwave("brown").fm(.6)
focus
Similar to compress, but doesn't leave gaps, and the 'focus' can be bigger than a cycle


s("bd hh sd hh").focus(1/4, 3/4)
freq
Set frequency of sound.


frequency : number | Pattern - in Hz. the audible range is between 20 and 20000 Hz
freq("220 110 440 110").s("superzow").osc()
freq("110".mul.out(".5 1.5 .6 [2 3]")).s("superzow").osc()
fromBipolar
Assumes a numerical pattern, containing bipolar values in the range -1 .. 1 Returns a new pattern with values scaled to the unipolar range 0 .. 1


fscope
Renders an oscilloscope for the frequency domain of the audio signal.


color : string - line color as hex or color name. defaults to white.
scale : number - scales the y-axis. Defaults to 0.25
pos : number - y-position relative to screen height. 0 = top, 1 = bottom of screen
lean : number - y-axis alignment where 0 = top and 1 = bottom
min : number - min value
max : number - max value
s("sawtooth").fscope()
ftype
Sets the filter type. The ladder filter is more aggressive. More types might be added in the future.


type : number | Pattern - 12db (0), ladder (1), or 24db (2)
note("{f g g c d a a#}%8").s("sawtooth").lpenv(4).lpf(500).ftype("<0 1 2>").lpq(1)
note("c f g g a c d4").fast(2)
.sound('sawtooth')
.lpf(200).fanchor(0)
.lpenv(3).lpq(1)
.ftype("<ladder 12db 24db>")
